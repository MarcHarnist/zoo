<?php

/*******************************************************************************************************/
/** OBJECT ORIENTED PROGRAMMING LANGAGE                                                               **/
/*******************************************************************************************************/
/** CLASS name: DatabaseUpdateZoo (child of the class Database)                                       **/
/*******************************************************************************************************/
/** AUTHOR: Marc L. Harnist                                                                           **/
/*******************************************************************************************************/
/** CREATION: 28/03/2018                                                                              **/
/*******************************************************************************************************/
/** UPDATED: 28/03/2018                                                                               **/
/*******************************************************************************************************/
/** FILE USING THIS CLASS: controller/aller-au-cafe                                                   **/
/**                                                                                               **/
/*******************************************************************************************************/
/** FUNCTION INSIDE: update_database                                                                  **/
/**                                                                                               **/
/*******************************************************************************************************/
class DatabaseUpdateZoo extends Database {

		protected $nom; // nom de l'espèce d'animal de la colonne nom de la table
		protected $table   = "zoo_espece"; // nombre d'animaux par espèce
		public $message;
		public $db;
		
		/**********************************************************************************************/
		/** Nom : construct                                                                          **/
		/**********************************************************************************************/
		/** Description : crée l'objet DatabaseUpdateZoo, et se connecte à la base de donnée         **/   
		/**               mysql en utilisant une fonction (connect()) de la classe mère (Database)   **/
		/**                                                		                                     **/
		/**********************************************************************************************/
		/** Paramètres : [string] : nom de l'espèce animale que nous voulons modifier dans la        **/
		/**                         base de donnée mysql                                             **/
		/**********************************************************************************************/
		/** Auteur : Marc L. Harnist                                                                 **/
		/**********************************************************************************************/
		/** Version : 1.0                                                                            **/
		/**********************************************************************************************/
		/** Créée le : 28/03/2018                                                                    **/
		/**********************************************************************************************/
		/** Modifiée le : 28/03/2018                                                                 **/	/**********************************************************************************************/	

		public function __construct($espece)
		{
			parent::__construct();
			$this->update_database($espece);
		}

		// 3. UPDATE  
		// U from CRUD - Database Update

		/**********************************************************************************************/
		/** Nom : update_database                                                                    **/
		/**********************************************************************************************/
		/** Description : modifie une ligne de la base de donnée                                     **/
		/**                                                		                                     **/
		/**********************************************************************************************/
		/** Paramètres : [array] objet Espece à modifier dans la base de donnée                      **/
		/**********************************************************************************************/
		/** Valeurs retournées :                                                                     **/
		/**********************************************************************************************/
		/** Auteur : Marc L. Harnist                                                                 **/
		/**********************************************************************************************/
		/** Version : 1.0                                                                            **/
		/**********************************************************************************************/
		/** Créée le : 28/03/2018                                                                    **/
		/**********************************************************************************************/
		/** Modifiée le : 28/03/2018                                                                 **/	/**********************************************************************************************/	
		function update_database($espece){

			$this->espece = $espece;
	 
			// ATTENTION: respectez bien l'ordre des ' et des " N'oubliez pas non plus les . (concaténation)
			$mysql_request = $this->db->prepare('UPDATE ' . $this->table . ' SET nom = :nom, nombre = :nombre, energy = :energy WHERE id = :id');
	  
			$mysql_request->execute(array(
			 'id'     => $espece->getId(),
			 'nom'    => $espece->getNom(),
			 'nombre' => $espece->getNombre(),
			 'energy' => $espece->getEnergy()
			 ));
		}
	} // Close the class